(this["webpackJsonpwould-you-rather"]=this["webpackJsonpwould-you-rather"]||[]).push([[0],{204:function(e,t,n){e.exports=n(343)},214:function(e,t,n){},343:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(40),i=n.n(o),u=(n(209),n(44)),s=n(23),c=(n(214),n(25)),l=n(26),m=n(27),h=n(28),d=n(355),p=n(24),b=n(190),v=n(95),f=n(189),E=n(67),O=n(22),j=n(16),g={sarahedo:{id:"sarahedo",name:"Sarah Edo",avatarURL:"../../images/snow.jpg",answers:{"8xf0y6ziyjabvozdd253nd":"optionOne","6ni6ok3ym7mf1p33lnez":"optionOne",am8ehyc8byjqgar0jgpub9:"optionTwo",loxhs1bqm25b708cmbf3g:"optionTwo"},questions:["8xf0y6ziyjabvozdd253nd","am8ehyc8byjqgar0jgpub9"]},tylermcginnis:{id:"tylermcginnis",name:"Tyler McGinnis",avatarURL:"../../images/tyler.jpg",answers:{vthrdm985a262al8qx3do:"optionOne",xj352vofupe1dqz9emx13r:"optionTwo"},questions:["loxhs1bqm25b708cmbf3g","vthrdm985a262al8qx3do"]},johndoe:{id:"johndoe",name:"John Doe",avatarURL:"../../images/leaf.jpg",answers:{xj352vofupe1dqz9emx13r:"optionOne",vthrdm985a262al8qx3do:"optionTwo","6ni6ok3ym7mf1p33lnez":"optionOne"},questions:["6ni6ok3ym7mf1p33lnez","xj352vofupe1dqz9emx13r"]}},y={"8xf0y6ziyjabvozdd253nd":{id:"8xf0y6ziyjabvozdd253nd",author:"sarahedo",timestamp:1467166872634,optionOne:{votes:["sarahedo"],text:"have horrible short term memory"},optionTwo:{votes:[],text:"have horrible long term memory"}},"6ni6ok3ym7mf1p33lnez":{id:"6ni6ok3ym7mf1p33lnez",author:"johndoe",timestamp:1468479767190,optionOne:{votes:[],text:"become a superhero"},optionTwo:{votes:["johndoe","sarahedo"],text:"become a supervillian"}},am8ehyc8byjqgar0jgpub9:{id:"am8ehyc8byjqgar0jgpub9",author:"sarahedo",timestamp:1488579767190,optionOne:{votes:[],text:"be telekinetic"},optionTwo:{votes:["sarahedo"],text:"be telepathic"}},loxhs1bqm25b708cmbf3g:{id:"loxhs1bqm25b708cmbf3g",author:"tylermcginnis",timestamp:1482579767190,optionOne:{votes:[],text:"be a front-end developer"},optionTwo:{votes:["sarahedo"],text:"be a back-end developer"}},vthrdm985a262al8qx3do:{id:"vthrdm985a262al8qx3do",author:"tylermcginnis",timestamp:1489579767190,optionOne:{votes:["tylermcginnis"],text:"find $50 yourself"},optionTwo:{votes:["johndoe"],text:"have your best friend find $500"}},xj352vofupe1dqz9emx13r:{id:"xj352vofupe1dqz9emx13r",author:"johndoe",timestamp:1493579767190,optionOne:{votes:["johndoe"],text:"write JavaScript"},optionTwo:{votes:["tylermcginnis"],text:"write Swift"}}};function w(e){return new Promise((function(t,n){var a=e.author,r=function(e){var t=e.optionOneText,n=e.optionTwoText,a=e.author;return{id:Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),timestamp:Date.now(),author:a,optionOne:{votes:[],text:t},optionTwo:{votes:[],text:n}}}(e);setTimeout((function(){y=Object(j.a)({},y,Object(O.a)({},r.id,r)),g=Object(j.a)({},g,Object(O.a)({},a,Object(j.a)({},g[a],{questions:g[a].questions.concat([r.id])}))),t(r)}),1e3)}))}var q=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={activeItem:"home"},e.handleItemClick=function(t,n){var a=n.name;return e.setState({activeItem:a})},e.logOut=function(){e.props.signOut(),e.props.history.push("/login")},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.state.activeItem,n=this.props.auth;return r.a.createElement(b.a,{secondary:!0},r.a.createElement(b.a.Item,{name:"home",active:"home"===t,onClick:this.handleItemClick,as:u.b,to:"/"}),r.a.createElement(b.a.Item,{name:"newQuestion",active:"newQuestion"===t,onClick:this.handleItemClick,as:u.b,to:"/question"}),r.a.createElement(b.a.Item,{name:"leaderBoard",active:"leaderBoard"===t,onClick:this.handleItemClick,as:u.b,to:"/leaderboard"}),r.a.createElement(b.a.Menu,{position:"right"},r.a.createElement(b.a.Item,{name:"user"},n&&n.user?r.a.createElement(v.a,{as:"a",color:"blue"},r.a.createElement(f.a,{avatar:!0,spaced:"right",src:n.user.avatarURL}),n&&n.user&&n.user.name):r.a.createElement(E.a,{name:"user",size:"large"})),r.a.createElement(b.a.Item,{name:"logout",onClick:function(){return e.logOut()}})))}}]),n}(a.Component),x={signOut:function(){return{type:"SIGN_OUT"}}},T=Object(p.h)(Object(s.b)((function(e,t){return{auth:e.auth}}),x)(q)),C=n(192),I=n(362),k=n(126),A=n(358),S=n(360),z=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={userId:null},e.handleChange=function(t,n){var a=n.value;return e.setState({userId:a})},e}return Object(l.a)(n,[{key:"login",value:function(){var e=this.props.location.state;this.props.signIn(this.props.users[this.state.userId]),e&&e.from?this.props.history.replace(e.from):this.props.history.push("/")}},{key:"render",value:function(){var e=this,t=Object.keys(this.props.users).map((function(t,n){return{key:t,value:t,text:e.props.users[t].name,image:{avatar:!0,src:"https://i.pravatar.cc/150?img=".concat(n+1)}}}));return r.a.createElement(C.a,{style:{height:"60vh"},className:"center aligned middle aligned"},r.a.createElement(C.a.Column,{style:{maxWidth:"450px"}},r.a.createElement(I.a,{as:"h2",icon:!0,textAlign:"center"},r.a.createElement(E.a,{name:"sign-in",circular:!0}),r.a.createElement(I.a.Content,null,"Login")),r.a.createElement(k.a,{basic:!0},r.a.createElement(A.a,{placeholder:"Select Friend",fluid:!0,selection:!0,options:t,value:this.state.userId,onChange:this.handleChange})),r.a.createElement(S.a,Object.assign({size:"huge",primary:!0,onClick:function(){return e.login()}},null===this.state.userId?{disabled:!0}:null),r.a.createElement(E.a,{name:"send"}),"Login")))}}]),n}(a.Component),U={signIn:function(e){return{type:"SIGN_IN",user:e}}},N=Object(p.h)(Object(s.b)((function(e,t){return{auth:e.auth,users:e.users}}),U)(z)),D=n(352),R=n(357),Q=n(359),_=n(353),G=function(e){var t=e.question,n=e.author,a=e.user,o=t.optionOne.votes.length,i=t.optionTwo.votes.length,u=o+i,s=o/u*100,c=i/u*100,l=function(){return r.a.createElement(v.a,{color:"yellow",floating:!0},"Your Vote")},m=t.optionOne.votes.includes(a.id)?l():null,h=t.optionTwo.votes.includes(a.id)?l():null,d=t.optionOne.votes.includes(a.id)?{color:"green"}:null,p=t.optionTwo.votes.includes(a.id)?{color:"green"}:null;return r.a.createElement(k.a,null,r.a.createElement(I.a,{as:"h1"},"Asked by ",n.name),r.a.createElement(D.a,null),r.a.createElement(C.a,{columns:2},r.a.createElement(C.a.Row,null,r.a.createElement(C.a.Column,null,r.a.createElement(R.a.Group,null,r.a.createElement(R.a,null,r.a.createElement(R.a.Image,{size:"small",src:a.avatarURL}),r.a.createElement(R.a.Content,{verticalAlign:"middle"},r.a.createElement(I.a,{as:"h3"},"Result"),r.a.createElement(Q.a,Object.assign({size:"big"},d),"Would you rather ",t.optionOne.text,m,r.a.createElement(_.a,{percent:s,progress:!0}),"".concat(o," out of ").concat(u," votes.")),r.a.createElement(Q.a,Object.assign({size:"big"},p),"Would you rather ",t.optionTwo.text,h,r.a.createElement(_.a,{percent:c,progress:!0}),"".concat(i," out of ").concat(u," votes.")))))),r.a.createElement(C.a.Column,null))))},L=n(356),P=n(354),W=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={optionOne:"",optionTwo:""},e.handleAnswerChange=function(t,n){var a=n.value;return e.setState({value:a})},e.handleAnswerSubmit=function(t){t.preventDefault();var n=e.state.value,a=e.props,r=a.match,o=a.questions,i=a.auth,u=r.params.id,s=u&&o[u];e.props.updateAnswerAsync(i.user.id,s.id,n)},e.handleChange=function(t,n){var a=n.name,r=n.value;e.setState(Object(O.a)({},a,r))},e.handleSubmit=function(t){t.preventDefault();var n=e.state,a=n.optionOne,r=n.optionTwo;e.props.addQuestionAsync(a,r,e.props.auth.user.id),e.props.history.push("/")},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.optionOne,n=e.optionTwo,o=this.props,i=o.match,u=o.questions,s=o.users,c=o.auth,l=i.params.id,m=l&&u[l],h=m&&s[m.author];return m&&(m.optionOne.votes.includes(c.user.id)||m.optionTwo.votes.includes(c.user.id))?r.a.createElement(G,{question:m,author:h,user:c.user}):r.a.createElement(k.a,null,r.a.createElement(C.a,{columns:3},r.a.createElement(C.a.Row,null,r.a.createElement(C.a.Column,null),r.a.createElement(C.a.Column,null,m?r.a.createElement(a.Fragment,null,r.a.createElement(R.a.Group,null,r.a.createElement(R.a,null,r.a.createElement(R.a.Image,{size:"small",src:h.avatarURL}),r.a.createElement(R.a.Content,null,r.a.createElement(R.a.Header,{as:"a"},h.name," asks:"),r.a.createElement(R.a.Description,null,r.a.createElement(I.a,{as:"h5"},"Would you rather"),r.a.createElement(L.a,{onSubmit:this.handleAnswerSubmit},r.a.createElement(L.a.Field,null,r.a.createElement(P.a,{label:m.optionOne.text,name:"radioGroup",value:"optionOne",checked:"optionOne"===this.state.value,onChange:this.handleAnswerChange})),r.a.createElement(L.a.Field,null,r.a.createElement(P.a,{label:m.optionTwo.text,name:"radioGroup",value:"optionTwo",checked:"optionTwo"===this.state.value,onChange:this.handleAnswerChange})),r.a.createElement(L.a.Button,Object.assign({content:"Submit"},this.state.value?null:{disabled:!0},{primary:!0})))))))):r.a.createElement(a.Fragment,null,r.a.createElement(I.a,{as:"h2"},"Create new Question"),r.a.createElement(I.a,{as:"h5"},"Would you rather"),r.a.createElement(L.a,{onSubmit:this.handleSubmit},r.a.createElement(L.a.Input,{placeholder:"be a front-end developer",name:"optionOne",value:t,onChange:this.handleChange}),r.a.createElement(D.a,{horizontal:!0},"Or"),r.a.createElement(L.a.Input,{placeholder:"full-stack developer",name:"optionTwo",value:n,onChange:this.handleChange}),r.a.createElement(L.a.Button,Object.assign({content:"Submit"},""===t||""===n?{disabled:!0}:null,{primary:!0}))))),r.a.createElement(C.a.Column,null))))}}]),n}(a.Component),F={updateAnswerAsync:function(e,t,n){return function(a,r){return function(e){var t=e.authedUser,n=e.qid,a=e.answer;return new Promise((function(e,r){setTimeout((function(){g=Object(j.a)({},g,Object(O.a)({},t,Object(j.a)({},g[t],{answers:Object(j.a)({},g[t].answers,Object(O.a)({},n,a))}))),y=Object(j.a)({},y,Object(O.a)({},n,Object(j.a)({},y[n],Object(O.a)({},a,Object(j.a)({},y[n][a],{votes:y[n][a].votes.concat([t])}))))),e()}),500)}))}({authedUser:e,qid:t,answer:n}).then((function(){a(function(e,t,n){return{type:"UPDATE_ANSWER",uid:e,qid:t,answer:n}}(e,t,n))}))}},addQuestionAsync:function(e,t,n){return function(a,r){return w({optionOneText:e,optionTwoText:t,author:n}).then((function(e){a(function(e){return{type:"ADD_QUESTION",question:e}}(e))}))}}},M=Object(p.h)(Object(s.b)((function(e,t){return{questions:e.questions,users:e.users,auth:e.auth}}),F)(W)),B=n(361),J=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.users,t=Object.keys(e).map((function(t){var n=Object.keys(e[t].answers).length,a=e[t].questions.length;return Object(j.a)({},e[t],{answersCount:n,questionsCount:a,total:n+a})})).sort((function(e,t){return t.total-e.total}));return r.a.createElement(R.a.Group,{divided:!0},t.map((function(e){return r.a.createElement(R.a,{key:e.id},r.a.createElement(R.a.Image,{src:e.avatarURL}),r.a.createElement(R.a.Content,{verticalAlign:"middle"},r.a.createElement(R.a.Header,null,e.name),r.a.createElement(R.a.Description,null,r.a.createElement(C.a,{relaxed:!0,columns:2},r.a.createElement(C.a.Column,null,r.a.createElement(I.a,{size:"small"},"Answered Questions: ",e.answersCount),r.a.createElement(I.a,{size:"small"},"Created Questions: ",e.questionsCount)),r.a.createElement(C.a.Column,null,r.a.createElement(B.a,{size:"large"},r.a.createElement(B.a.Label,null,"Score"),r.a.createElement(B.a.Value,null,e.total)))))))})))}}]),n}(a.Component),H=Object(s.b)((function(e,t){return{users:e.users}}))(J),V=n(363),$=function(e){var t=e.question,n=e.author,o=Object(p.g)();return r.a.createElement(a.Fragment,null,r.a.createElement(R.a,null,r.a.createElement(R.a.Image,{size:"tiny",src:n.avatarURL}),r.a.createElement(R.a.Content,null,r.a.createElement(R.a.Header,null,n.name," asks"),r.a.createElement(R.a.Meta,null,"Would you rather"),r.a.createElement(R.a.Description,null,t.optionOne.text),r.a.createElement(R.a.Extra,null,r.a.createElement(S.a,{primary:!0,floated:"right",onClick:function(){return o.push("/question/".concat(t.id))}},"View Poll",r.a.createElement(E.a,{name:"right chevron"}))))))},Y=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={activeIndex:1},e.handleTabChange=function(t,n){var a=n.activeIndex;return e.setState({activeIndex:a})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.questions,n=e.auth,a=e.users,o=Object.keys(t),i=o.filter((function(e){return t[e].optionOne.votes.includes(n.user.id)||t[e].optionTwo.votes.includes(n.user.id)})).map((function(e){return{id:e,timestamp:t[e].timestamp}})).sort((function(e,t){return t.timestamp-e.timestamp})),u=o.filter((function(e){return!t[e].optionOne.votes.includes(n.user.id)&&!t[e].optionTwo.votes.includes(n.user.id)})).map((function(e){return{id:e,timestamp:t[e].timestamp}})).sort((function(e,t){return t.timestamp-e.timestamp})),s=[{menuItem:"Un Answered Questions",render:function(){return r.a.createElement(V.a.Pane,null,r.a.createElement(R.a.Group,null,u.map((function(e){var n=e.id,o=t[n],i=a[o.author];return r.a.createElement($,{key:o.id,question:o,author:i})}))))}},{menuItem:"Answered Questions",render:function(){return r.a.createElement(V.a.Pane,null,r.a.createElement(R.a.Group,{link:!0},i.map((function(e){var n=e.id,o=t[n],i=a[o.author];return r.a.createElement($,{key:o.id,question:o,author:i})}))))}}];return r.a.createElement("div",null,r.a.createElement(V.a,{panes:s,onTabChange:this.handleTabChange,defaultActiveIndex:0}))}}]),n}(r.a.Component),K=Object(s.b)((function(e,t){return{users:e.users,questions:e.questions,auth:e.auth}}))(Y),X=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return r.a.createElement(K,null)}}]),n}(a.Component),Z=n(191);var ee=Object(s.b)((function(e,t){return{auth:e.auth}}))((function(e){var t=e.children,n=e.auth,a=Object(Z.a)(e,["children","auth"]);return r.a.createElement(p.b,Object.assign({},a,{render:function(e){var a=e.location;return n&&n.isAuthenticated?t:r.a.createElement(p.a,{to:{pathname:"/login",state:{from:a}}})}}))})),te=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.initUsersAsync(),this.props.initQuestionsAsync()}},{key:"render",value:function(){var e=this.props.auth;return r.a.createElement(d.a,null,e.isAuthenticated?r.a.createElement(T,null):null,r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/login"},r.a.createElement(N,null)),r.a.createElement(ee,null,r.a.createElement(p.b,{exact:!0,path:"/"},r.a.createElement(X,null)),r.a.createElement(p.b,{path:"/question/:id"},r.a.createElement(M,null)),r.a.createElement(p.b,{exact:!0,path:"/question"},r.a.createElement(M,null)),r.a.createElement(p.b,{path:"/leaderboard"},r.a.createElement(H,null)))))}}]),n}(r.a.Component),ne={initUsersAsync:function(){return function(e,t){return new Promise((function(e,t){setTimeout((function(){return e(Object(j.a)({},g))}),1e3)})).then((function(t){e(function(e){return{type:"INIT_USERS",users:e}}(t))}))}},initQuestionsAsync:function(){return function(e,t){return new Promise((function(e,t){setTimeout((function(){return e(Object(j.a)({},y))}),1e3)})).then((function(t){return e(function(e){return{type:"INIT_QUESTIONS",questions:e}}(t))}))}}},ae=Object(s.b)((function(e,t){return{auth:e.auth}}),ne)(te),re=n(54),oe={isAuthenticated:!1,user:null},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USERS":var n=t.users,a={};return Object.keys(n).forEach((function(e,t){a[e]=Object(j.a)({},n[e],{avatarURL:"https://i.pravatar.cc/150?img=".concat(t+1)})})),a;case"UPDATE_ANSWER":return Object(j.a)({},e,Object(O.a)({},t.uid,Object(j.a)({},e[t.uid],{answers:Object(j.a)({},e[t.uid].answers,Object(O.a)({},t.qid,t.answer))})));case"ADD_QUESTION":return Object(j.a)({},e,Object(O.a)({},t.question.author,Object(j.a)({},e[t.question.author],{questions:e[t.question.author].questions.concat([t.question.id])})));default:return e}},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_QUESTIONS":return t.questions;case"UPDATE_ANSWER":return Object(j.a)({},e,Object(O.a)({},t.qid,Object(j.a)({},e[t.qid],Object(O.a)({},t.answer,Object(j.a)({},e[t.qid][t.answer],{votes:e[t.qid][t.answer].votes.concat([t.uid])})))));case"ADD_QUESTION":return Object(j.a)({},e,Object(O.a)({},t.question.id,t.question));default:return e}},se=Object(re.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN":return Object(j.a)({},e,{isAuthenticated:!0,user:t.user});case"SIGN_OUT":return Object(j.a)({},e,{isAuthenticated:!1,user:null});default:return e}},users:ie,questions:ue}),ce=n(188),le=Object(re.d)(se,Object(re.a)(ce.a));i.a.render(r.a.createElement(s.a,{store:le},r.a.createElement(u.a,null,r.a.createElement(ae,null))),document.getElementById("root"))}},[[204,1,2]]]);
//# sourceMappingURL=main.3dc1dffe.chunk.js.map